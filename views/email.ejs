<%- include("templates/header", {headerMessage: "Welcome User" }) %>
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <title>Document</title>
        <script>

            function send_mail(name, recipient) {
                const accessToken = OAuth2_client.getAccessToken()

                const transport = nodemailer.createTransport({
                    service: 'gmail',
                    auth: {
                        type: 'OAuth2',
                        user: config.user,
                        clientId: config.clientId,
                        clientSecret: config.clientSecret,
                        refreshToken: config.refreshToken,
                        accessToken: accessToken
                    }
                })

                const mail_options = {
                    from: `Recall RX <${config.user}>`,
                    to: recipient,
                    subject: 'Password Reset for Recall RX',
                    html: get_html_message(name)
                }

                transport.sendMail(mail_options, function (error, result) {
                    if (error) {
                        console.log('Error: ', error)
                    } else {
                        console.log('Success: ', result)
                    }
                    transport.close()
                })
            }

            function get_html_message(name) {
                return `
    <h3> ${name}! Here is the link to reset your password: https://salmon-bat-cuff.cyclic.app/signup <h3>
    `
            }

            send_mail('Emma', 'jy.lee.emma@gmail.com')
        </script>
        <style>
            body {
                background-image: url('login.jpg');
                background-position: center;
                height: 100vh;
            }
        </style>
    </head>

    <body>
        <section class="vh-100 gradient-custom">
            <div class="container py-5 h-100">
                <div class="row d-flex justify-content-center align-items-center h-100">
                    <div class="col-12 col-md-8 col-lg-6 col-xl-5">
                        <div class="card bg text-white" style="border-radius: 1rem; background-color: #778251;">
                            <div class="card-body p-5 text-center">
                                <div class="mb-md-5 mt-md-4 pb-5">
                                    <h1 class="fw-bold mb-2 text-uppercase">Find Your Password</h1>
                                    <p class="text-white-50 mb-5" style="color: black; font-size: 30px">Enter your
                                        recovery
                                        email</p>
                                    <br>
                                    <br>
                                    <div class="form-outline form-white mb-4">
                                        <input type="email" id="typeEmailX" placeholder="Email address"
                                            class="form-control form-control-lg" />
                                        <label class="form-label" for="typeEmailX" style="font-size: 25px;"></label>
                                    </div>
                                    <button type="button" class="btn dark-green-background pill white-font font-lg"
                                        style="background-color: #778251;">
                                        <a href="/thankyou" style="font-size: 20px; color:white;">
                                            <h1>Submit</h1>
                                        </a>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </body>

    </html>
    <%- include("templates/footer") %>